<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>nRF51822 Beacon Firmware Documentation: DFU BLE SVC</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF51822 Beacon Firmware Documentation
   &#160;<span id="projectnumber">v1.1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__nrf__dfu__ble__svc.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">DFU BLE SVC</div>  </div>
</div><!--header-->
<div class="contents">

<p>DFU BLE SVC in bootloader. The DFU BLE SuperVisor Calls allow an application to execute functions in the installed bootloader.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdfu__ble__peer__data__t.html">dfu_ble_peer_data_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">DFU Peer data structure.  <a href="structdfu__ble__peer__data__t.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga40250c4367f60f8adf2f36ca02a620d2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nrf__dfu__ble__svc.html#ga40250c4367f60f8adf2f36ca02a620d2">BOOTLOADER_SVC_BASE</a>&#160;&#160;&#160;0x0</td></tr>
<tr class="separator:ga40250c4367f60f8adf2f36ca02a620d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gab61a9eaf497f22e66f7a0f76d8203133"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nrf__dfu__ble__svc.html#gab61a9eaf497f22e66f7a0f76d8203133">BOOTLOADER_SVCS</a> { <a class="el" href="group__nrf__dfu__ble__svc.html#ggab61a9eaf497f22e66f7a0f76d8203133a343827596c1f6effeaf0ff0149cb5734">DFU_BLE_SVC_SET_PEER_DATA</a> = BOOTLOADER_SVC_BASE, 
<a class="el" href="group__nrf__dfu__ble__svc.html#ggab61a9eaf497f22e66f7a0f76d8203133a931060405e5dadcdc67a01ccee0ca4c8">BOOTLOADER_SVC_LAST</a>
 }</td></tr>
<tr class="memdesc:gab61a9eaf497f22e66f7a0f76d8203133"><td class="mdescLeft">&#160;</td><td class="mdescRight">The SVC numbers used by the SVC functions in the SoC library.  <a href="group__nrf__dfu__ble__svc.html#gab61a9eaf497f22e66f7a0f76d8203133">More...</a><br/></td></tr>
<tr class="separator:gab61a9eaf497f22e66f7a0f76d8203133"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga89ad32acc3b0828cda3c8c322174ef1f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nrf__dfu__ble__svc.html#ga89ad32acc3b0828cda3c8c322174ef1f">SVCALL</a> (<a class="el" href="group__nrf__dfu__ble__svc.html#ggab61a9eaf497f22e66f7a0f76d8203133a343827596c1f6effeaf0ff0149cb5734">DFU_BLE_SVC_SET_PEER_DATA</a>, uint32_t, dfu_ble_svc_set_peer_data(<a class="el" href="structdfu__ble__peer__data__t.html">dfu_ble_peer_data_t</a> *p_peer_data))</td></tr>
<tr class="memdesc:ga89ad32acc3b0828cda3c8c322174ef1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">SVC Function for setting peer data containing address, IRK, and LTK to establish bonded connection in DFU mode.  <a href="#ga89ad32acc3b0828cda3c8c322174ef1f">More...</a><br/></td></tr>
<tr class="separator:ga89ad32acc3b0828cda3c8c322174ef1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>DFU BLE SVC in bootloader. The DFU BLE SuperVisor Calls allow an application to execute functions in the installed bootloader. </p>
<p>This module implements handling of SuperVisor Calls in the bootloader. SuperVisor Calls allow for an application to execute calls into the bootloader. Currently, it is possible to exchange bonding information (like keys) from the application to a bootloader supporting DFU OTA using BLE, so the update process can be done through an already existing bond.</p>
<dl class="section note"><dt>Note</dt><dd>The application must make sure that all SuperVisor Calls (SVC) are forwarded to the bootloader to ensure correct behavior. Forwarding of SVCs to the bootloader is done using the SoftDevice SVC sd_softdevice_vector_table_base_set with the value present in <code>NRF_UICR-&gt;BOOTLOADERADDR</code>. </dd></dl>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga40250c4367f60f8adf2f36ca02a620d2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BOOTLOADER_SVC_BASE&#160;&#160;&#160;0x0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of the lowest SVC number reserved for the bootloader. </p>

<p>Definition at line <a class="el" href="dfu__ble__svc_8h_source.html#l00043">43</a> of file <a class="el" href="dfu__ble__svc_8h_source.html">dfu_ble_svc.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="gab61a9eaf497f22e66f7a0f76d8203133"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__nrf__dfu__ble__svc.html#gab61a9eaf497f22e66f7a0f76d8203133">BOOTLOADER_SVCS</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The SVC numbers used by the SVC functions in the SoC library. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="ggab61a9eaf497f22e66f7a0f76d8203133a343827596c1f6effeaf0ff0149cb5734"></a>DFU_BLE_SVC_SET_PEER_DATA</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ggab61a9eaf497f22e66f7a0f76d8203133a931060405e5dadcdc67a01ccee0ca4c8"></a>BOOTLOADER_SVC_LAST</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="dfu__ble__svc_8h_source.html#l00046">46</a> of file <a class="el" href="dfu__ble__svc_8h_source.html">dfu_ble_svc.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;{</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="group__nrf__dfu__ble__svc.html#ggab61a9eaf497f22e66f7a0f76d8203133a343827596c1f6effeaf0ff0149cb5734">DFU_BLE_SVC_SET_PEER_DATA</a> = <a class="code" href="group__nrf__dfu__ble__svc.html#ga40250c4367f60f8adf2f36ca02a620d2">BOOTLOADER_SVC_BASE</a>,</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="group__nrf__dfu__ble__svc.html#ggab61a9eaf497f22e66f7a0f76d8203133a931060405e5dadcdc67a01ccee0ca4c8">BOOTLOADER_SVC_LAST</a></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;};</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga89ad32acc3b0828cda3c8c322174ef1f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SVCALL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__nrf__dfu__ble__svc.html#ggab61a9eaf497f22e66f7a0f76d8203133a343827596c1f6effeaf0ff0149cb5734">DFU_BLE_SVC_SET_PEER_DATA</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dfu_ble_svc_set_peer_data(<a class="el" href="structdfu__ble__peer__data__t.html">dfu_ble_peer_data_t</a> *p_peer_data)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SVC Function for setting peer data containing address, IRK, and LTK to establish bonded connection in DFU mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_peer_data</td><td>Pointer to the peer data containing keys for the connection.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NRF_ERROR_NULL</td><td>If a NULL pointer was provided as argument. </td></tr>
    <tr><td class="paramname">NRF_SUCCESS</td><td>If the function completed successfully. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Apr 13 2015 11:33:11 for nRF51822 Beacon Firmware Documentation by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
