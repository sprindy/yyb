<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>nRF51822 Beacon Firmware Documentation: nrf51_beacon/common/sdk_modified/pstorage/pstorage_mod.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF51822 Beacon Firmware Documentation
   &#160;<span id="projectnumber">v1.1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('pstorage__mod_8c.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">pstorage_mod.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="pstorage_8h_source.html">pstorage.h</a>&quot;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;stdint.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &quot;nordic_common.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="nrf__error_8h_source.html">nrf_error.h</a>&quot;</code><br/>
<code>#include &quot;nrf_assert.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="nrf_8h_source.html">nrf.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="nrf__soc_8h_source.html">nrf_soc.h</a>&quot;</code><br/>
<code>#include &quot;app_util.h&quot;</code><br/>
</div>
<p><a href="pstorage__mod_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpstorage__module__table__t.html">pstorage_module_table_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Application registration information.  <a href="structpstorage__module__table__t.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcmd__queue__element__t.html">cmd_queue_element_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines command queue element.  <a href="structcmd__queue__element__t.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcmd__queue__t.html">cmd_queue_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines command queue, an element is free if op_code field is not invalid.  <a href="structcmd__queue__t.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae8a964fad9f97467ca7fc24e214a9e01"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pstorage__mod_8c.html#ae8a964fad9f97467ca7fc24e214a9e01">INVALID_OPCODE</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="separator:ae8a964fad9f97467ca7fc24e214a9e01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a331ea60527b8d933979a04a0d1931329"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pstorage__mod_8c.html#a331ea60527b8d933979a04a0d1931329">SOC_MAX_WRITE_SIZE</a>&#160;&#160;&#160;1024</td></tr>
<tr class="separator:a331ea60527b8d933979a04a0d1931329"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94b4283cfb2fa7e5353d3e45d7033872"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pstorage__mod_8c.html#a94b4283cfb2fa7e5353d3e45d7033872">RAW_MODE_APP_ID</a>&#160;&#160;&#160;(PSTORAGE_MAX_APPLICATIONS + 1)</td></tr>
<tr class="separator:a94b4283cfb2fa7e5353d3e45d7033872"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadc3e2547b67be7deaa8497592f86e156"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__param__check.html#gadc3e2547b67be7deaa8497592f86e156">NULL_PARAM_CHECK</a>(PARAM)</td></tr>
<tr class="memdesc:gadc3e2547b67be7deaa8497592f86e156"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the input pointer is NULL, if it is returns NRF_ERROR_NULL.  <a href="group__api__param__check.html#gadc3e2547b67be7deaa8497592f86e156">More...</a><br/></td></tr>
<tr class="separator:gadc3e2547b67be7deaa8497592f86e156"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaae9da1fe8e7ab5ff48f1bfec1a3e021a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__param__check.html#gaae9da1fe8e7ab5ff48f1bfec1a3e021a">MODULE_ID_RANGE_CHECK</a>(ID)</td></tr>
<tr class="memdesc:gaae9da1fe8e7ab5ff48f1bfec1a3e021a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verifies the module identifier supplied by the application is within permissible range.  <a href="group__api__param__check.html#gaae9da1fe8e7ab5ff48f1bfec1a3e021a">More...</a><br/></td></tr>
<tr class="separator:gaae9da1fe8e7ab5ff48f1bfec1a3e021a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac113d37e10e428c70c18b974d0e1aba6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__param__check.html#gac113d37e10e428c70c18b974d0e1aba6">BLOCK_ID_RANGE_CHECK</a>(ID)</td></tr>
<tr class="memdesc:gac113d37e10e428c70c18b974d0e1aba6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verifies the block identifier supplied by the application is within the permissible range.  <a href="group__api__param__check.html#gac113d37e10e428c70c18b974d0e1aba6">More...</a><br/></td></tr>
<tr class="separator:gac113d37e10e428c70c18b974d0e1aba6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga390c0edec329da58f574fd36b99fbcd6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__param__check.html#ga390c0edec329da58f574fd36b99fbcd6">BLOCK_SIZE_CHECK</a>(X)</td></tr>
<tr class="memdesc:ga390c0edec329da58f574fd36b99fbcd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verifies the block size requested by the application can be supported by the module.  <a href="group__api__param__check.html#ga390c0edec329da58f574fd36b99fbcd6">More...</a><br/></td></tr>
<tr class="separator:ga390c0edec329da58f574fd36b99fbcd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5e14b8accad4619d2ae281ddeea57b81"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__param__check.html#ga5e14b8accad4619d2ae281ddeea57b81">BLOCK_COUNT_CHECK</a>(COUNT, SIZE)</td></tr>
<tr class="memdesc:ga5e14b8accad4619d2ae281ddeea57b81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verifies block size requested by Application in registration API.  <a href="group__api__param__check.html#ga5e14b8accad4619d2ae281ddeea57b81">More...</a><br/></td></tr>
<tr class="separator:ga5e14b8accad4619d2ae281ddeea57b81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga411cb019552dba20f70efe942571c06a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__param__check.html#ga411cb019552dba20f70efe942571c06a">SIZE_CHECK</a>(ID, SIZE)</td></tr>
<tr class="memdesc:ga411cb019552dba20f70efe942571c06a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verifies size parameter provided by application in API.  <a href="group__api__param__check.html#ga411cb019552dba20f70efe942571c06a">More...</a><br/></td></tr>
<tr class="separator:ga411cb019552dba20f70efe942571c06a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7422f4fbd01befcc308edfcbd75b066c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__param__check.html#ga7422f4fbd01befcc308edfcbd75b066c">OFFSET_CHECK</a>(ID, OFFSET, SIZE)</td></tr>
<tr class="memdesc:ga7422f4fbd01befcc308edfcbd75b066c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verifies offset parameter provided by application in API.  <a href="group__api__param__check.html#ga7422f4fbd01befcc308edfcbd75b066c">More...</a><br/></td></tr>
<tr class="separator:ga7422f4fbd01befcc308edfcbd75b066c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e4917fcb7e2eca587b8114a78a5e184"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pstorage__mod_8c.html#a6e4917fcb7e2eca587b8114a78a5e184">VERIFY_MODULE_INITIALIZED</a>()</td></tr>
<tr class="memdesc:a6e4917fcb7e2eca587b8114a78a5e184"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify module's initialization status.  <a href="#a6e4917fcb7e2eca587b8114a78a5e184">More...</a><br/></td></tr>
<tr class="separator:a6e4917fcb7e2eca587b8114a78a5e184"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd01180037c08795d18b60f42068b4d9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pstorage__mod_8c.html#acd01180037c08795d18b60f42068b4d9">MODULE_BLOCK_SIZE</a>(ID)&#160;&#160;&#160;(<a class="el" href="pstorage__nosd_8c.html#a61d34204e440691235ecf310f87002af">m_app_table</a>[(ID)-&gt;module_id].block_size)</td></tr>
<tr class="memdesc:acd01180037c08795d18b60f42068b4d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro to fetch the block size registered for the module.  <a href="#acd01180037c08795d18b60f42068b4d9">More...</a><br/></td></tr>
<tr class="separator:acd01180037c08795d18b60f42068b4d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a69fa0c3173bb59cc6a4907cb18de03ec"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03ec">swap_backup_state_t</a> { <br/>
&#160;&#160;<a class="el" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03eca98d2a2153b4ae0445fa0b114d65b94d9">STATE_INIT</a>, 
<a class="el" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03eca38dc08c7fee1ad64f0a62788c9c9a8c1">STATE_DATA_TO_SWAP_WRITE</a>, 
<a class="el" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03eca8bf8e397bd25d4a5b8f06e844026b616">STATE_DATA_ERASE</a>, 
<a class="el" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03ecaf54478673392a43ef3c887b3db89b0a9">STATE_HEAD_RESTORE</a>, 
<br/>
&#160;&#160;<a class="el" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03eca47083903ebe8137c35d40ffc57ae355e">STATE_TAIL_RESTORE</a>, 
<a class="el" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03ecae7960498d64521690dd52b61ff4ab2d5">STATE_NEW_BODY_WRITE</a>, 
<a class="el" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03eca240812b0e713ea6c50fe47cfdb2528b4">STATE_SWAP_ERASE</a>, 
<a class="el" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03eca79ae1582c50ffdc26c332345ede75d7c">STATE_COMPLETE</a>, 
<br/>
&#160;&#160;<a class="el" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03eca2f95a4ddba06ae64a00fcb3178a8114f">STATE_SWAP_DIRTY</a>, 
<a class="el" href="pstorage_8c.html#a69fa0c3173bb59cc6a4907cb18de03eca98d2a2153b4ae0445fa0b114d65b94d9">STATE_INIT</a>, 
<a class="el" href="pstorage_8c.html#a69fa0c3173bb59cc6a4907cb18de03eca38dc08c7fee1ad64f0a62788c9c9a8c1">STATE_DATA_TO_SWAP_WRITE</a>, 
<a class="el" href="pstorage_8c.html#a69fa0c3173bb59cc6a4907cb18de03eca8bf8e397bd25d4a5b8f06e844026b616">STATE_DATA_ERASE</a>, 
<br/>
&#160;&#160;<a class="el" href="pstorage_8c.html#a69fa0c3173bb59cc6a4907cb18de03ecaf54478673392a43ef3c887b3db89b0a9">STATE_HEAD_RESTORE</a>, 
<a class="el" href="pstorage_8c.html#a69fa0c3173bb59cc6a4907cb18de03eca47083903ebe8137c35d40ffc57ae355e">STATE_TAIL_RESTORE</a>, 
<a class="el" href="pstorage_8c.html#a69fa0c3173bb59cc6a4907cb18de03ecae7960498d64521690dd52b61ff4ab2d5">STATE_NEW_BODY_WRITE</a>, 
<a class="el" href="pstorage_8c.html#a69fa0c3173bb59cc6a4907cb18de03eca240812b0e713ea6c50fe47cfdb2528b4">STATE_SWAP_ERASE</a>, 
<br/>
&#160;&#160;<a class="el" href="pstorage_8c.html#a69fa0c3173bb59cc6a4907cb18de03eca79ae1582c50ffdc26c332345ede75d7c">STATE_COMPLETE</a>, 
<a class="el" href="pstorage_8c.html#a69fa0c3173bb59cc6a4907cb18de03eca2f95a4ddba06ae64a00fcb3178a8114f">STATE_SWAP_DIRTY</a>
<br/>
 }</td></tr>
<tr class="memdesc:a69fa0c3173bb59cc6a4907cb18de03ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">States for the Update/Clear swap backup state machine.  <a href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03ec">More...</a><br/></td></tr>
<tr class="separator:a69fa0c3173bb59cc6a4907cb18de03ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga78a52b91014e89edc2a765f42f792b3f"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__utility__functions.html#ga78a52b91014e89edc2a765f42f792b3f">cmd_process</a> (void)</td></tr>
<tr class="memdesc:ga78a52b91014e89edc2a765f42f792b3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routine called to actually issue the flash access request to the SoftDevice.  <a href="group__utility__functions.html#ga78a52b91014e89edc2a765f42f792b3f">More...</a><br/></td></tr>
<tr class="separator:ga78a52b91014e89edc2a765f42f792b3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaecb5cc97cd7b645b026173fa47dc1266"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__utility__functions.html#gaecb5cc97cd7b645b026173fa47dc1266">app_notify</a> (uint32_t result, <a class="el" href="structcmd__queue__element__t.html">cmd_queue_element_t</a> *p_elem)</td></tr>
<tr class="memdesc:gaecb5cc97cd7b645b026173fa47dc1266"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routine to notify application of any errors.  <a href="group__utility__functions.html#gaecb5cc97cd7b645b026173fa47dc1266">More...</a><br/></td></tr>
<tr class="separator:gaecb5cc97cd7b645b026173fa47dc1266"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga544e69fa09540f4db68d8a144a963310"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__utility__functions.html#ga544e69fa09540f4db68d8a144a963310">cmd_queue_element_init</a> (uint32_t index)</td></tr>
<tr class="memdesc:ga544e69fa09540f4db68d8a144a963310"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes command queue element.  <a href="group__utility__functions.html#ga544e69fa09540f4db68d8a144a963310">More...</a><br/></td></tr>
<tr class="separator:ga544e69fa09540f4db68d8a144a963310"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gade390fede7a3eff9869a7850a6b53c02"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__utility__functions.html#gade390fede7a3eff9869a7850a6b53c02">cmd_queue_init</a> (void)</td></tr>
<tr class="memdesc:gade390fede7a3eff9869a7850a6b53c02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes command queue.  <a href="group__utility__functions.html#gade390fede7a3eff9869a7850a6b53c02">More...</a><br/></td></tr>
<tr class="separator:gade390fede7a3eff9869a7850a6b53c02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga161eddb644ed938b9341102ac2237844"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__utility__functions.html#ga161eddb644ed938b9341102ac2237844">cmd_queue_enqueue</a> (uint8_t opcode, pstorage_handle_t *p_storage_addr, uint8_t *p_data_addr, pstorage_size_t size, pstorage_size_t offset)</td></tr>
<tr class="memdesc:ga161eddb644ed938b9341102ac2237844"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routine to enqueue a flash access operation.  <a href="group__utility__functions.html#ga161eddb644ed938b9341102ac2237844">More...</a><br/></td></tr>
<tr class="separator:ga161eddb644ed938b9341102ac2237844"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5026eeb68df47eb0714f063471b14c12"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__utility__functions.html#ga5026eeb68df47eb0714f063471b14c12">cmd_queue_dequeue</a> (void)</td></tr>
<tr class="memdesc:ga5026eeb68df47eb0714f063471b14c12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dequeues a command element.  <a href="group__utility__functions.html#ga5026eeb68df47eb0714f063471b14c12">More...</a><br/></td></tr>
<tr class="separator:ga5026eeb68df47eb0714f063471b14c12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga11860d5ebd557b256ede4ddd5d5d5aed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__utility__functions.html#ga11860d5ebd557b256ede4ddd5d5d5aed">pstorage_sys_event_handler</a> (uint32_t sys_evt)</td></tr>
<tr class="memdesc:ga11860d5ebd557b256ede4ddd5d5d5aed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles Flash Access Result Events declared in pstorage_platform.h.  <a href="group__utility__functions.html#ga11860d5ebd557b256ede4ddd5d5d5aed">More...</a><br/></td></tr>
<tr class="separator:ga11860d5ebd557b256ede4ddd5d5d5aed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3a61c82e63c372562b71466b441cefc2"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__utility__functions.html#ga3a61c82e63c372562b71466b441cefc2">swap_state_process</a> (<a class="el" href="structcmd__queue__element__t.html">cmd_queue_element_t</a> *p_cmd, uint32_t page_number, uint32_t head_word_size, uint32_t tail_word_size)</td></tr>
<tr class="memdesc:ga3a61c82e63c372562b71466b441cefc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for handling flash accesses when using swap.  <a href="group__utility__functions.html#ga3a61c82e63c372562b71466b441cefc2">More...</a><br/></td></tr>
<tr class="separator:ga3a61c82e63c372562b71466b441cefc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga729ef8b64fc0cb6bfdabb2543a565d32"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pstorage__routines.html#ga729ef8b64fc0cb6bfdabb2543a565d32">pstorage_init</a> (void)</td></tr>
<tr class="memdesc:ga729ef8b64fc0cb6bfdabb2543a565d32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Module Initialization Routine.  <a href="group__pstorage__routines.html#ga729ef8b64fc0cb6bfdabb2543a565d32">More...</a><br/></td></tr>
<tr class="separator:ga729ef8b64fc0cb6bfdabb2543a565d32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0a57b964c8945eaca2d267835ef6688c"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pstorage__routines.html#ga0a57b964c8945eaca2d267835ef6688c">pstorage_register</a> (<a class="el" href="structpstorage__module__param__t.html">pstorage_module_param_t</a> *p_module_param, pstorage_handle_t *p_block_id)</td></tr>
<tr class="memdesc:ga0a57b964c8945eaca2d267835ef6688c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register with persistent storage interface.  <a href="group__pstorage__routines.html#ga0a57b964c8945eaca2d267835ef6688c">More...</a><br/></td></tr>
<tr class="separator:ga0a57b964c8945eaca2d267835ef6688c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafdeeb475e4f2db19863226bc55d507b5"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pstorage__routines.html#gafdeeb475e4f2db19863226bc55d507b5">pstorage_block_identifier_get</a> (pstorage_handle_t *p_base_id, pstorage_size_t block_num, pstorage_handle_t *p_block_id)</td></tr>
<tr class="memdesc:gafdeeb475e4f2db19863226bc55d507b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to get block id with reference to base block identifier provided at time of registration.  <a href="group__pstorage__routines.html#gafdeeb475e4f2db19863226bc55d507b5">More...</a><br/></td></tr>
<tr class="separator:gafdeeb475e4f2db19863226bc55d507b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga12e52da12709de8d43bfb8389b80af6d"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pstorage__routines.html#ga12e52da12709de8d43bfb8389b80af6d">pstorage_store</a> (pstorage_handle_t *p_dest, uint8_t *p_src, pstorage_size_t size, pstorage_size_t offset)</td></tr>
<tr class="memdesc:ga12e52da12709de8d43bfb8389b80af6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routine to persistently store data of length 'size' contained in 'p_src' address in storage module at 'p_dest' address; Equivalent to Storage Write.  <a href="group__pstorage__routines.html#ga12e52da12709de8d43bfb8389b80af6d">More...</a><br/></td></tr>
<tr class="separator:ga12e52da12709de8d43bfb8389b80af6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0316f640da7481e9bd03ed51b29a3e65"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pstorage__routines.html#ga0316f640da7481e9bd03ed51b29a3e65">pstorage_update</a> (pstorage_handle_t *p_dest, uint8_t *p_src, pstorage_size_t size, pstorage_size_t offset)</td></tr>
<tr class="memdesc:ga0316f640da7481e9bd03ed51b29a3e65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routine to update persistently stored data of length 'size' contained in 'p_src' address in storage module at 'p_dest' address.  <a href="group__pstorage__routines.html#ga0316f640da7481e9bd03ed51b29a3e65">More...</a><br/></td></tr>
<tr class="separator:ga0316f640da7481e9bd03ed51b29a3e65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga99402440650cc2d2ee63d8866760a25b"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pstorage__routines.html#ga99402440650cc2d2ee63d8866760a25b">pstorage_load</a> (uint8_t *p_dest, pstorage_handle_t *p_src, pstorage_size_t size, pstorage_size_t offset)</td></tr>
<tr class="memdesc:ga99402440650cc2d2ee63d8866760a25b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routine to load persistently stored data of length 'size' from 'p_src' address to 'p_dest' address; Equivalent to Storage Read.  <a href="group__pstorage__routines.html#ga99402440650cc2d2ee63d8866760a25b">More...</a><br/></td></tr>
<tr class="separator:ga99402440650cc2d2ee63d8866760a25b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga64d9814f864c3f771a99eb7574e87dd0"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pstorage__routines.html#ga64d9814f864c3f771a99eb7574e87dd0">pstorage_clear</a> (pstorage_handle_t *p_dest, pstorage_size_t size)</td></tr>
<tr class="memdesc:ga64d9814f864c3f771a99eb7574e87dd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routine to clear data in persistent memory.  <a href="group__pstorage__routines.html#ga64d9814f864c3f771a99eb7574e87dd0">More...</a><br/></td></tr>
<tr class="separator:ga64d9814f864c3f771a99eb7574e87dd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1553a4d6d6d8ddf070d0eb4960b72d62"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pstorage__routines.html#ga1553a4d6d6d8ddf070d0eb4960b72d62">pstorage_access_status_get</a> (uint32_t *p_count)</td></tr>
<tr class="memdesc:ga1553a4d6d6d8ddf070d0eb4960b72d62"><td class="mdescLeft">&#160;</td><td class="mdescRight">API to get status of number of pending operations with the module.  <a href="group__pstorage__routines.html#ga1553a4d6d6d8ddf070d0eb4960b72d62">More...</a><br/></td></tr>
<tr class="separator:ga1553a4d6d6d8ddf070d0eb4960b72d62"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aa4316c8dd50f357ae5f6b4d5c8c2e85a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structcmd__queue__t.html">cmd_queue_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pstorage__mod_8c.html#aa4316c8dd50f357ae5f6b4d5c8c2e85a">m_cmd_queue</a></td></tr>
<tr class="separator:aa4316c8dd50f357ae5f6b4d5c8c2e85a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb0ea5d8898efee3644c43b2206d4a57"><td class="memItemLeft" align="right" valign="top">static pstorage_size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pstorage__mod_8c.html#aeb0ea5d8898efee3644c43b2206d4a57">m_next_app_instance</a></td></tr>
<tr class="separator:aeb0ea5d8898efee3644c43b2206d4a57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d3292c0e300f3deb4b05d9fe6354779"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pstorage__mod_8c.html#a2d3292c0e300f3deb4b05d9fe6354779">m_next_page_addr</a></td></tr>
<tr class="separator:a2d3292c0e300f3deb4b05d9fe6354779"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa78b6a4bd7867f97c12b4ff45e9db22"><td class="memItemLeft" align="right" valign="top">static pstorage_size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pstorage__mod_8c.html#afa78b6a4bd7867f97c12b4ff45e9db22">m_round_val</a></td></tr>
<tr class="separator:afa78b6a4bd7867f97c12b4ff45e9db22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e99e7d02e854ee64a37440c60bf641e"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pstorage__mod_8c.html#a7e99e7d02e854ee64a37440c60bf641e">m_module_initialized</a> = false</td></tr>
<tr class="separator:a7e99e7d02e854ee64a37440c60bf641e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a424c25c247944aad095274cfd4429646"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03ec">swap_backup_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pstorage__mod_8c.html#a424c25c247944aad095274cfd4429646">m_swap_state</a></td></tr>
<tr class="separator:a424c25c247944aad095274cfd4429646"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61d34204e440691235ecf310f87002af"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structpstorage__module__table__t.html">pstorage_module_table_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pstorage__mod_8c.html#a61d34204e440691235ecf310f87002af">m_app_table</a> [PSTORAGE_MAX_APPLICATIONS]</td></tr>
<tr class="separator:a61d34204e440691235ecf310f87002af"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ae8a964fad9f97467ca7fc24e214a9e01"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INVALID_OPCODE&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Invalid op code identifier. </p>

<p>Definition at line <a class="el" href="pstorage__mod_8c_source.html#l00024">24</a> of file <a class="el" href="pstorage__mod_8c_source.html">pstorage_mod.c</a>.</p>

</div>
</div>
<a class="anchor" id="a331ea60527b8d933979a04a0d1931329"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SOC_MAX_WRITE_SIZE&#160;&#160;&#160;1024</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum write size allowed for a single call to sd_flash_write as specified in the SoC API. </p>

<p>Definition at line <a class="el" href="pstorage__mod_8c_source.html#l00025">25</a> of file <a class="el" href="pstorage__mod_8c_source.html">pstorage_mod.c</a>.</p>

</div>
</div>
<a class="anchor" id="a94b4283cfb2fa7e5353d3e45d7033872"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RAW_MODE_APP_ID&#160;&#160;&#160;(PSTORAGE_MAX_APPLICATIONS + 1)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Application id for raw mode. </p>

<p>Definition at line <a class="el" href="pstorage__mod_8c_source.html#l00026">26</a> of file <a class="el" href="pstorage__mod_8c_source.html">pstorage_mod.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6e4917fcb7e2eca587b8114a78a5e184"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VERIFY_MODULE_INITIALIZED</td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span>                                                                                        \</div>
<div class="line">        {                                                                                         \</div>
<div class="line">            if (!<a class="code" href="pstorage__mod_8c.html#a7e99e7d02e854ee64a37440c60bf641e">m_module_initialized</a>)                                                            \</div>
<div class="line">            {                                                                                     \</div>
<div class="line">                 return <a class="code" href="group__nrf__error.html#gaf0aff2ba7864b34a36b4a96986e1851e" title="Invalid state, operation disallowed in this state. ">NRF_ERROR_INVALID_STATE</a>;                                                  \</div>
<div class="line">            }                                                                                     \</div>
<div class="line">        } <span class="keywordflow">while</span>(0)</div>
</div><!-- fragment -->
<p>Verify module's initialization status. </p>
<p>Verify module's initialization status. Returns NRF_ERROR_INVALID_STATE in case a module API is called without initializing the module. </p>

<p>Definition at line <a class="el" href="pstorage__mod_8c_source.html#l00128">128</a> of file <a class="el" href="pstorage__mod_8c_source.html">pstorage_mod.c</a>.</p>

</div>
</div>
<a class="anchor" id="acd01180037c08795d18b60f42068b4d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MODULE_BLOCK_SIZE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ID)</td><td></td>
          <td>&#160;&#160;&#160;(<a class="el" href="pstorage__nosd_8c.html#a61d34204e440691235ecf310f87002af">m_app_table</a>[(ID)-&gt;module_id].block_size)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Macro to fetch the block size registered for the module. </p>

<p>Definition at line <a class="el" href="pstorage__mod_8c_source.html#l00138">138</a> of file <a class="el" href="pstorage__mod_8c_source.html">pstorage_mod.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="a69fa0c3173bb59cc6a4907cb18de03ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03ec">swap_backup_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>States for the Update/Clear swap backup state machine. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a69fa0c3173bb59cc6a4907cb18de03eca98d2a2153b4ae0445fa0b114d65b94d9"></a>STATE_INIT</em>&nbsp;</td><td class="fielddoc">
<p>State for indicating that swap can be used when using update/clear API. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a69fa0c3173bb59cc6a4907cb18de03eca38dc08c7fee1ad64f0a62788c9c9a8c1"></a>STATE_DATA_TO_SWAP_WRITE</em>&nbsp;</td><td class="fielddoc">
<p>State for doing backup of data page into the swap page when using update/clear API. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a69fa0c3173bb59cc6a4907cb18de03eca8bf8e397bd25d4a5b8f06e844026b616"></a>STATE_DATA_ERASE</em>&nbsp;</td><td class="fielddoc">
<p>State for erasing data page when using update/clear API. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a69fa0c3173bb59cc6a4907cb18de03ecaf54478673392a43ef3c887b3db89b0a9"></a>STATE_HEAD_RESTORE</em>&nbsp;</td><td class="fielddoc">
<p>State for restoring head (beginning) of backed up data from swap to data page when using update/clear API. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a69fa0c3173bb59cc6a4907cb18de03eca47083903ebe8137c35d40ffc57ae355e"></a>STATE_TAIL_RESTORE</em>&nbsp;</td><td class="fielddoc">
<p>State for restoring tail (end) of backed up data from swap to data page when using update/clear API. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a69fa0c3173bb59cc6a4907cb18de03ecae7960498d64521690dd52b61ff4ab2d5"></a>STATE_NEW_BODY_WRITE</em>&nbsp;</td><td class="fielddoc">
<p>State for writing body (middle) data to the data page when using update/clear API. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a69fa0c3173bb59cc6a4907cb18de03eca240812b0e713ea6c50fe47cfdb2528b4"></a>STATE_SWAP_ERASE</em>&nbsp;</td><td class="fielddoc">
<p>State for erasing the swap page when using the update/clear API. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a69fa0c3173bb59cc6a4907cb18de03eca79ae1582c50ffdc26c332345ede75d7c"></a>STATE_COMPLETE</em>&nbsp;</td><td class="fielddoc">
<p>State for indicating that update/clear sequence is completed internal in the module when using the update/clear API. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a69fa0c3173bb59cc6a4907cb18de03eca2f95a4ddba06ae64a00fcb3178a8114f"></a>STATE_SWAP_DIRTY</em>&nbsp;</td><td class="fielddoc">
<p>State for initializing the swap region on module initialization. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a69fa0c3173bb59cc6a4907cb18de03eca98d2a2153b4ae0445fa0b114d65b94d9"></a>STATE_INIT</em>&nbsp;</td><td class="fielddoc">
<p>State for indicating that swap can be used when using update/clear API. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a69fa0c3173bb59cc6a4907cb18de03eca38dc08c7fee1ad64f0a62788c9c9a8c1"></a>STATE_DATA_TO_SWAP_WRITE</em>&nbsp;</td><td class="fielddoc">
<p>State for doing backup of data page into the swap page when using update/clear API. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a69fa0c3173bb59cc6a4907cb18de03eca8bf8e397bd25d4a5b8f06e844026b616"></a>STATE_DATA_ERASE</em>&nbsp;</td><td class="fielddoc">
<p>State for erasing data page when using update/clear API. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a69fa0c3173bb59cc6a4907cb18de03ecaf54478673392a43ef3c887b3db89b0a9"></a>STATE_HEAD_RESTORE</em>&nbsp;</td><td class="fielddoc">
<p>State for restoring head (beginning) of backed up data from swap to data page when using update/clear API. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a69fa0c3173bb59cc6a4907cb18de03eca47083903ebe8137c35d40ffc57ae355e"></a>STATE_TAIL_RESTORE</em>&nbsp;</td><td class="fielddoc">
<p>State for restoring tail (end) of backed up data from swap to data page when using update/clear API. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a69fa0c3173bb59cc6a4907cb18de03ecae7960498d64521690dd52b61ff4ab2d5"></a>STATE_NEW_BODY_WRITE</em>&nbsp;</td><td class="fielddoc">
<p>State for writing body (middle) data to the data page when using update/clear API. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a69fa0c3173bb59cc6a4907cb18de03eca240812b0e713ea6c50fe47cfdb2528b4"></a>STATE_SWAP_ERASE</em>&nbsp;</td><td class="fielddoc">
<p>State for erasing the swap page when using the update/clear API. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a69fa0c3173bb59cc6a4907cb18de03eca79ae1582c50ffdc26c332345ede75d7c"></a>STATE_COMPLETE</em>&nbsp;</td><td class="fielddoc">
<p>State for indicating that update/clear sequence is completed internal in the module when using the update/clear API. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a69fa0c3173bb59cc6a4907cb18de03eca2f95a4ddba06ae64a00fcb3178a8114f"></a>STATE_SWAP_DIRTY</em>&nbsp;</td><td class="fielddoc">
<p>State for initializing the swap region on module initialization. </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="pstorage__mod_8c_source.html#l00142">142</a> of file <a class="el" href="pstorage__mod_8c_source.html">pstorage_mod.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;{</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03eca98d2a2153b4ae0445fa0b114d65b94d9">STATE_INIT</a>,                </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03eca38dc08c7fee1ad64f0a62788c9c9a8c1">STATE_DATA_TO_SWAP_WRITE</a>,  </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03eca8bf8e397bd25d4a5b8f06e844026b616">STATE_DATA_ERASE</a>,          </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03ecaf54478673392a43ef3c887b3db89b0a9">STATE_HEAD_RESTORE</a>,        </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03eca47083903ebe8137c35d40ffc57ae355e">STATE_TAIL_RESTORE</a>,        </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03ecae7960498d64521690dd52b61ff4ab2d5">STATE_NEW_BODY_WRITE</a>,      </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03eca240812b0e713ea6c50fe47cfdb2528b4">STATE_SWAP_ERASE</a>,          </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03eca79ae1582c50ffdc26c332345ede75d7c">STATE_COMPLETE</a>,            </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03eca2f95a4ddba06ae64a00fcb3178a8114f">STATE_SWAP_DIRTY</a>           </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;} <a class="code" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03ec" title="States for the Update/Clear swap backup state machine. ">swap_backup_state_t</a>;</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="aa4316c8dd50f357ae5f6b4d5c8c2e85a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcmd__queue__t.html">cmd_queue_t</a> m_cmd_queue</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flash operation request queue. </p>

<p>Definition at line <a class="el" href="pstorage__mod_8c_source.html#l00220">220</a> of file <a class="el" href="pstorage__mod_8c_source.html">pstorage_mod.c</a>.</p>

</div>
</div>
<a class="anchor" id="aeb0ea5d8898efee3644c43b2206d4a57"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pstorage_size_t m_next_app_instance</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Points to the application module instance that can be allocated next. </p>

<p>Definition at line <a class="el" href="pstorage__mod_8c_source.html#l00221">221</a> of file <a class="el" href="pstorage__mod_8c_source.html">pstorage_mod.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2d3292c0e300f3deb4b05d9fe6354779"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t m_next_page_addr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Points to the flash address that can be allocated to a module next, this is needed as blocks of a module can span across flash pages. </p>

<p>Definition at line <a class="el" href="pstorage__mod_8c_source.html#l00222">222</a> of file <a class="el" href="pstorage__mod_8c_source.html">pstorage_mod.c</a>.</p>

</div>
</div>
<a class="anchor" id="afa78b6a4bd7867f97c12b4ff45e9db22"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pstorage_size_t m_round_val</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Round value for multiple round operations. For erase operations, the round value will contain current round counter which is identical to number of pages erased. For store operations, the round value contains current round of operation * SOC_MAX_WRITE_SIZE to ensure each store to the SoC Flash API is within the SoC limit. </p>

<p>Definition at line <a class="el" href="pstorage__mod_8c_source.html#l00223">223</a> of file <a class="el" href="pstorage__mod_8c_source.html">pstorage_mod.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7e99e7d02e854ee64a37440c60bf641e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool m_module_initialized = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flag for checking if module has been initialized. </p>

<p>Definition at line <a class="el" href="pstorage__mod_8c_source.html#l00224">224</a> of file <a class="el" href="pstorage__mod_8c_source.html">pstorage_mod.c</a>.</p>

</div>
</div>
<a class="anchor" id="a424c25c247944aad095274cfd4429646"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pstorage__mod_8c.html#a69fa0c3173bb59cc6a4907cb18de03ec">swap_backup_state_t</a> m_swap_state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Swap page state. </p>

<p>Definition at line <a class="el" href="pstorage__mod_8c_source.html#l00225">225</a> of file <a class="el" href="pstorage__mod_8c_source.html">pstorage_mod.c</a>.</p>

</div>
</div>
<a class="anchor" id="a61d34204e440691235ecf310f87002af"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpstorage__module__table__t.html">pstorage_module_table_t</a> m_app_table[PSTORAGE_MAX_APPLICATIONS]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Registered application information table. </p>

<p>Definition at line <a class="el" href="pstorage__mod_8c_source.html#l00228">228</a> of file <a class="el" href="pstorage__mod_8c_source.html">pstorage_mod.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_753c3ab39a1e65d5d58171958880fde4.html">nrf51_beacon</a></li><li class="navelem"><a class="el" href="dir_7bb9c0916e75b1f4f3021293237d6d44.html">common</a></li><li class="navelem"><a class="el" href="dir_0495ca5c2b5ff72f9a00bb2e334f39be.html">sdk_modified</a></li><li class="navelem"><a class="el" href="dir_116a43fe4b868bfb5a33bfee7f497c48.html">pstorage</a></li><li class="navelem"><a class="el" href="pstorage__mod_8c.html">pstorage_mod.c</a></li>
    <li class="footer">Generated on Mon Apr 13 2015 11:33:11 for nRF51822 Beacon Firmware Documentation by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
